# üîß –ò–°–ü–†–ê–í–õ–ï–ù–ò–Ø –£–ü–†–ê–í–õ–ï–ù–ò–Ø –£–°–¢–†–û–ô–°–¢–í–ê–ú–ò

**–î–∞—Ç–∞:** 14 –∞–≤–≥—É—Å—Ç–∞ 2025  
**–°—Ç–∞—Ç—É—Å:** ‚úÖ –ò–°–ü–†–ê–í–õ–ï–ù–û

---

## üêõ –ü–†–û–ë–õ–ï–ú–´, –ö–û–¢–û–†–´–ï –ë–´–õ–ò –ò–°–ü–†–ê–í–õ–ï–ù–´

### 1. –î–æ–±–∞–≤–ª–µ–Ω–∏–µ —É—Å—Ç—Ä–æ–π—Å—Ç–≤ –Ω–µ —Ä–∞–±–æ—Ç–∞–ª–æ
**–ü—Ä–æ–±–ª–µ–º–∞:** –ü—Ä–∏ –Ω–∞–∂–∞—Ç–∏–∏ "–î–æ–±–∞–≤–∏—Ç—å —É—Å—Ç—Ä–æ–π—Å—Ç–≤–æ" –ø–æ–∫–∞–∑—ã–≤–∞–ª–æ—Å—å –≥–ª–∞–≤–Ω–æ–µ –º–µ–Ω—é –≤–º–µ—Å—Ç–æ —Å–ø–µ—Ü–∏–∞–ª—å–Ω–æ–π –∫–ª–∞–≤–∏–∞—Ç—É—Ä—ã
**–†–µ—à–µ–Ω–∏–µ:** 
- –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∞ –∫–ª–∞–≤–∏–∞—Ç—É—Ä–∞: —Ç–µ–ø–µ—Ä—å –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç—Å—è `dev_menu` –≤–º–µ—Å—Ç–æ `top_menu`
- –î–æ–±–∞–≤–ª–µ–Ω–∞ –æ–±—Ä–∞–±–æ—Ç–∫–∞ –¥–µ–π—Å—Ç–≤–∏—è "add" –≤ `main.py`
- –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –ø—Ä–∞–≤–∏–ª—å–Ω–æ–≥–æ FSM —Å–æ—Å—Ç–æ—è–Ω–∏—è —Å –¥–∞–Ω–Ω—ã–º–∏

### 2. –û—Ç—Å—É—Ç—Å—Ç–≤–æ–≤–∞–ª–∞ –æ–±—Ä–∞–±–æ—Ç–∫–∞ –≤–≤–æ–¥–∞ Node ID
**–ü—Ä–æ–±–ª–µ–º–∞:** –ü—Ä–∏ –≤–≤–æ–¥–µ Node ID –Ω–∏—á–µ–≥–æ –Ω–µ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏–ª–æ
**–†–µ—à–µ–Ω–∏–µ:**
- –î–æ–±–∞–≤–ª–µ–Ω –æ–±—Ä–∞–±–æ—Ç—á–∏–∫ `action == "add"` –≤ `main.py`
- –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–∞ –ª–æ–≥–∏–∫–∞ –¥–æ–±–∞–≤–ª–µ–Ω–∏—è —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞ —á–µ—Ä–µ–∑ `link_node_to_user_manual`
- –û–±—Ä–∞–±–æ—Ç–∫–∞ –≤—Å–µ—Ö –≤–æ–∑–º–æ–∂–Ω—ã—Ö —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤: "ok", "already", "owned_by_other", "limit"

### 3. –ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω—ã–µ –∫–ª–∞–≤–∏–∞—Ç—É—Ä—ã –ø–æ—Å–ª–µ –¥–µ–π—Å—Ç–≤–∏–π
**–ü—Ä–æ–±–ª–µ–º–∞:** –ü–æ—Å–ª–µ –¥–æ–±–∞–≤–ª–µ–Ω–∏—è/–ø–µ—Ä–µ–∏–º–µ–Ω–æ–≤–∞–Ω–∏—è/–æ—Ç–ø—Ä–∞–≤–∫–∏ —Å–æ–æ–±—â–µ–Ω–∏–π –ø–æ–∫–∞–∑—ã–≤–∞–ª–æ—Å—å –≥–ª–∞–≤–Ω–æ–µ –º–µ–Ω—é
**–†–µ—à–µ–Ω–∏–µ:**
- –í—Å–µ –¥–µ–π—Å—Ç–≤–∏—è —Ç–µ–ø–µ—Ä—å –≤–æ–∑–≤—Ä–∞—â–∞—é—Ç –∫ `dev_menu` –≤–º–µ—Å—Ç–æ `top_menu`
- –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –æ—Å—Ç–∞–µ—Ç—Å—è –≤ –∫–æ–Ω—Ç–µ–∫—Å—Ç–µ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞–º–∏

### 4. –û—Ç—Å—É—Ç—Å—Ç–≤–æ–≤–∞–ª–∏ –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ –¥–ª—è "–†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å" –∏ "–£–¥–∞–ª–∏—Ç—å"
**–ü—Ä–æ–±–ª–µ–º–∞:** –ö–Ω–æ–ø–∫–∏ "–†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å" –∏ "–£–¥–∞–ª–∏—Ç—å" –Ω–µ –ø–æ–∫–∞–∑—ã–≤–∞–ª–∏ —Å–ø–∏—Å–æ–∫ —É—Å—Ç—Ä–æ–π—Å—Ç–≤
**–†–µ—à–µ–Ω–∏–µ:**
- –î–æ–±–∞–≤–ª–µ–Ω—ã –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ –¥–ª—è `action == "edit"` –∏ `action == "delete"`
- –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ —Å–ø–∏—Å–∫–∞ —É—Å—Ç—Ä–æ–π—Å—Ç–≤ —Å –∫–Ω–æ–ø–∫–∞–º–∏ –¥–µ–π—Å—Ç–≤–∏–π
- –î–æ–±–∞–≤–ª–µ–Ω –æ–±—Ä–∞–±–æ—Ç—á–∏–∫ `action == "edit_device"` –¥–ª—è –º–µ–Ω—é –¥–µ–π—Å—Ç–≤–∏–π —Å –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã–º —É—Å—Ç—Ä–æ–π—Å—Ç–≤–æ–º

---

## ‚úÖ –†–ï–ê–õ–ò–ó–û–í–ê–ù–ù–ê–Ø –§–£–ù–ö–¶–ò–û–ù–ê–õ–¨–ù–û–°–¢–¨

### –î–æ–±–∞–≤–ª–µ–Ω–∏–µ —É—Å—Ç—Ä–æ–π—Å—Ç–≤
1. **–ù–∞–∂–∞—Ç–∏–µ "–î–æ–±–∞–≤–∏—Ç—å"** ‚Üí –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç—Å—è `dev_menu` —Å —Ç–µ–∫—Å—Ç–æ–º "–í–≤–µ–¥–∏—Ç–µ Node ID"
2. **–í–≤–æ–¥ Node ID** ‚Üí –æ–±—Ä–∞–±–æ—Ç–∫–∞ —á–µ—Ä–µ–∑ `link_node_to_user_manual`
3. **–†–µ–∑—É–ª—å—Ç–∞—Ç:**
   - ‚úÖ "–£—Å—Ç—Ä–æ–π—Å—Ç–≤–æ –¥–æ–±–∞–≤–ª–µ–Ω–æ: {node_id}" (—É—Å–ø–µ—Ö)
   - ‚ö†Ô∏è "–≠—Ç–æ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–æ —É–∂–µ –ø—Ä–∏–≤—è–∑–∞–Ω–æ –∫ –≤–∞–º" (—É–∂–µ –¥–æ–±–∞–≤–ª–µ–Ω–æ)
   - ‚ùå "–£—Å—Ç—Ä–æ–π—Å—Ç–≤–æ –ø—Ä–∏–≤—è–∑–∞–Ω–æ –∫ –¥—Ä—É–≥–æ–º—É –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é" (–∑–∞–Ω—è—Ç–æ)
   - üö´ "–î–æ—Å—Ç–∏–≥–Ω—É—Ç –ª–∏–º–∏—Ç: 3 —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞ –Ω–∞ –∞–∫–∫–∞—É–Ω—Ç" (–ª–∏–º–∏—Ç)

### –†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —É—Å—Ç—Ä–æ–π—Å—Ç–≤
1. **–ù–∞–∂–∞—Ç–∏–µ "–†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å"** ‚Üí –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç—Å—è —Å–ø–∏—Å–æ–∫ —É—Å—Ç—Ä–æ–π—Å—Ç–≤ —Å –∫–Ω–æ–ø–∫–∞–º–∏
2. **–í—ã–±–æ—Ä —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞** ‚Üí –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç—Å—è –º–µ–Ω—é –¥–µ–π—Å—Ç–≤–∏–π:
   - ‚úçÔ∏è **–ù–∞–ø–∏—Å–∞—Ç—å** ‚Üí –≤–≤–æ–¥ —Ç–µ–∫—Å—Ç–∞ –¥–ª—è –æ—Ç–ø—Ä–∞–≤–∫–∏
   - ‚úèÔ∏è **–ü–µ—Ä–µ–∏–º–µ–Ω–æ–≤–∞—Ç—å** ‚Üí –≤–≤–æ–¥ –Ω–æ–≤–æ–≥–æ –∏–º–µ–Ω–∏
   - üóëÔ∏è **–£–¥–∞–ª–∏—Ç—å** ‚Üí –æ—Ç–≤—è–∑–∫–∞ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞

### –£–¥–∞–ª–µ–Ω–∏–µ —É—Å—Ç—Ä–æ–π—Å—Ç–≤
1. **–ù–∞–∂–∞—Ç–∏–µ "–£–¥–∞–ª–∏—Ç—å"** ‚Üí –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç—Å—è —Å–ø–∏—Å–æ–∫ —É—Å—Ç—Ä–æ–π—Å—Ç–≤ —Å –∫–Ω–æ–ø–∫–∞–º–∏ —É–¥–∞–ª–µ–Ω–∏—è
2. **–í—ã–±–æ—Ä —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞** ‚Üí —É—Å—Ç—Ä–æ–π—Å—Ç–≤–æ –æ—Ç–≤—è–∑—ã–≤–∞–µ—Ç—Å—è –æ—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è

### –ü–µ—Ä–µ–∏–º–µ–Ω–æ–≤–∞–Ω–∏–µ —É—Å—Ç—Ä–æ–π—Å—Ç–≤
1. **–í—ã–±–æ—Ä "–ü–µ—Ä–µ–∏–º–µ–Ω–æ–≤–∞—Ç—å"** ‚Üí –≤–≤–æ–¥ –Ω–æ–≤–æ–≥–æ –∏–º–µ–Ω–∏ (–¥–æ 64 —Å–∏–º–≤–æ–ª–æ–≤)
2. **–†–µ–∑—É–ª—å—Ç–∞—Ç:** "–£—Å—Ç—Ä–æ–π—Å—Ç–≤–æ {node_id} –ø–µ—Ä–µ–∏–º–µ–Ω–æ–≤–∞–Ω–æ –≤: {label}"

### –û—Ç–ø—Ä–∞–≤–∫–∞ —Å–æ–æ–±—â–µ–Ω–∏–π
1. **–í—ã–±–æ—Ä "–ù–∞–ø–∏—Å–∞—Ç—å"** ‚Üí –≤–≤–æ–¥ —Ç–µ–∫—Å—Ç–∞ —Å–æ–æ–±—â–µ–Ω–∏—è
2. **–†–µ–∑—É–ª—å—Ç–∞—Ç:** —Å–æ–æ–±—â–µ–Ω–∏–µ –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç—Å—è –≤ MQTT —Ç–æ–ø–∏–∫
3. **–§–æ—Ä–º–∞—Ç:** `{"to": node_id, "type": "sendtext", "payload": "[[TG]] —Ç–µ–∫—Å—Ç"}`

---

## üéØ –†–ê–ë–û–¢–ê –° –ü–û–õ–¨–ó–û–í–ê–¢–ï–õ–¨–°–ö–ò–ú–ò –ú–ï–¢–ö–ê–ú–ò

### –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è –∏–º—ë–Ω:
1. **user_label** (–ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∞—è –º–µ—Ç–∫–∞) - –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç 1
2. **alias** (—Å–∏—Å—Ç–µ–º–Ω–æ–µ –∏–º—è) - –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç 2  
3. **node_id** (—á–∏—Å–ª–æ–≤–æ–π ID) - –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç 3

### –ü—Ä–∏–º–µ—Ä—ã:
- –ï—Å–ª–∏ –∑–∞–¥–∞–Ω–∞ –º–µ—Ç–∫–∞ "–ú—ç—à—à–ø–∏–ª—å" ‚Üí –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç—Å—è "–ú—ç—à—à–ø–∏–ª—å"
- –ï—Å–ª–∏ –Ω–µ—Ç –º–µ—Ç–∫–∏, –Ω–æ –µ—Å—Ç—å alias "node1" ‚Üí –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç—Å—è "node1"
- –ï—Å–ª–∏ –Ω–∏—á–µ–≥–æ –Ω–µ—Ç ‚Üí –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç—Å—è "123456"

### –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –≤ Mesh‚ÜíTG:
- –ü—Ä–∏ –ø–æ–ª—É—á–µ–Ω–∏–∏ —Å–æ–æ–±—â–µ–Ω–∏—è –∏–∑ Mesh –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç—Å—è –º–µ—Ç–∫–∞ –æ—Ç–ø—Ä–∞–≤–∏—Ç–µ–ª—è
- –í —Å–ø–∏—Å–∫–µ —É—Å—Ç—Ä–æ–π—Å—Ç–≤ –ø–æ–∫–∞–∑—ã–≤–∞—é—Ç—Å—è –º–µ—Ç–∫–∏
- –ü—Ä–∏ –≤—ã–±–æ—Ä–µ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞ –¥–ª—è –¥–µ–π—Å—Ç–≤–∏–π –∏—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è –º–µ—Ç–∫–∏

---

## üîß –¢–ï–•–ù–ò–ß–ï–°–ö–ò–ï –î–ï–¢–ê–õ–ò

### –ò–∑–º–µ–Ω—ë–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã:
- `app/src/bot/handlers/menu.py` - –¥–æ–±–∞–≤–ª–µ–Ω—ã –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ edit/delete/edit_device
- `app/src/bot/main.py` - –¥–æ–±–∞–≤–ª–µ–Ω–∞ –æ–±—Ä–∞–±–æ—Ç–∫–∞ action "add"
- `app/src/common/i18n.py` - –¥–æ–±–∞–≤–ª–µ–Ω –∫–ª—é—á "dev.edit_device"

### –ù–æ–≤—ã–µ –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∏:
- `action == "add"` - –¥–æ–±–∞–≤–ª–µ–Ω–∏–µ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞
- `action == "edit"` - —Å–ø–∏—Å–æ–∫ —É—Å—Ç—Ä–æ–π—Å—Ç–≤ –¥–ª—è —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è
- `action == "delete"` - —Å–ø–∏—Å–æ–∫ —É—Å—Ç—Ä–æ–π—Å—Ç–≤ –¥–ª—è —É–¥–∞–ª–µ–Ω–∏—è
- `action == "edit_device"` - –º–µ–Ω—é –¥–µ–π—Å—Ç–≤–∏–π —Å –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã–º —É—Å—Ç—Ä–æ–π—Å—Ç–≤–æ–º

### FSM —Å–æ—Å—Ç–æ—è–Ω–∏—è:
- `UserState.REGISTERING` —Å –¥–∞–Ω–Ω—ã–º–∏:
  - `{"action": "add"}` - –¥–æ–±–∞–≤–ª–µ–Ω–∏–µ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞
  - `{"action": "write", "node_id": X}` - –æ—Ç–ø—Ä–∞–≤–∫–∞ —Å–æ–æ–±—â–µ–Ω–∏—è
  - `{"action": "rename", "node_id": X}` - –ø–µ—Ä–µ–∏–º–µ–Ω–æ–≤–∞–Ω–∏–µ

---

## ‚úÖ –†–ï–ó–£–õ–¨–¢–ê–¢

**–¢–µ–ø–µ—Ä—å —Å–∏—Å—Ç–µ–º–∞ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞–º–∏ —Ä–∞–±–æ—Ç–∞–µ—Ç –ø–æ–ª–Ω–æ—Å—Ç—å—é:**

1. ‚úÖ **–î–æ–±–∞–≤–ª–µ–Ω–∏–µ —É—Å—Ç—Ä–æ–π—Å—Ç–≤** - —Ä–∞–±–æ—Ç–∞–µ—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ
2. ‚úÖ **–ü–µ—Ä–µ–∏–º–µ–Ω–æ–≤–∞–Ω–∏–µ —É—Å—Ç—Ä–æ–π—Å—Ç–≤** - –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–µ –º–µ—Ç–∫–∏ —Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è
3. ‚úÖ **–û—Ç–ø—Ä–∞–≤–∫–∞ —Å–æ–æ–±—â–µ–Ω–∏–π** - —Ä–∞–±–æ—Ç–∞–µ—Ç —á–µ—Ä–µ–∑ MQTT
4. ‚úÖ **–£–¥–∞–ª–µ–Ω–∏–µ —É—Å—Ç—Ä–æ–π—Å—Ç–≤** - –æ—Ç–≤—è–∑–∫–∞ –æ—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
5. ‚úÖ **–ü—Ä–∞–≤–∏–ª—å–Ω—ã–µ –∫–ª–∞–≤–∏–∞—Ç—É—Ä—ã** - –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –æ—Å—Ç–∞–µ—Ç—Å—è –≤ –∫–æ–Ω—Ç–µ–∫—Å—Ç–µ
6. ‚úÖ **–û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫** - –≤—Å–µ —Å–ª—É—á–∞–∏ –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞—é—Ç—Å—è
7. ‚úÖ **–õ–∏–º–∏—Ç—ã** - –º–∞–∫—Å–∏–º—É–º 3 —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞ –Ω–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è

**–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ —Ç–µ–ø–µ—Ä—å –º–æ–≥—É—Ç:**
- –î–æ–±–∞–≤–ª—è—Ç—å —Å–≤–æ–∏ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞ —Å –∫—Ä–∞—Å–∏–≤—ã–º–∏ –∏–º–µ–Ω–∞–º–∏
- –ü–æ–ª—É—á–∞—Ç—å —Å–æ–æ–±—â–µ–Ω–∏—è –æ—Ç —É—Å—Ç—Ä–æ–π—Å—Ç–≤ —Å –ø–æ–Ω—è—Ç–Ω—ã–º–∏ –º–µ—Ç–∫–∞–º–∏
- –û—Ç–ø—Ä–∞–≤–ª—è—Ç—å —Å–æ–æ–±—â–µ–Ω–∏—è –Ω–∞ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞ —á–µ—Ä–µ–∑ —É–¥–æ–±–Ω—ã–π –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å
- –£–ø—Ä–∞–≤–ª—è—Ç—å —Å–ø–∏—Å–∫–æ–º —Å–≤–æ–∏—Ö —É—Å—Ç—Ä–æ–π—Å—Ç–≤

**–°–∏—Å—Ç–µ–º–∞ –≥–æ—Ç–æ–≤–∞ –∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é!** üöÄ
